apply plugin: 'java'

group 'de.kaleidox'
version '0.2.1-SNAPSHOT'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories.jcenter()

compileJava {
    options.encoding = "UTF-8"
}

jar {
    dependsOn 'processResources'
}

processResources {
    from(sourceSets.main.resources) {
        expand project.properties
    }
}

task testPlugin(type: Copy, dependsOn: ['deleteTestPlugin', 'jar']) {
    from tasks.findByName('jar').outputs.files.singleFile
    into file("test/plugins/")
    rename { String filename ->
        return filename.contains('e2uClaim') ? 'e2uClaim.jar' : filename;
    }
}

task deleteTestPlugin(type: Delete) {
    delete 'test/plugins/e2uClaim.jar'
}

dependencies {
    compileOnly fileTree("libs")

    compileOnly 'org.jetbrains:annotations:17.0.0'
}
